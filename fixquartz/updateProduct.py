# -*- coding: utf-8 -*
import requests
import time
from bs4 import BeautifulSoup
import json
import threading

count = 0
headers = {'User-agent':'Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/60.0.3112.113 Safari/537.36'}
ips = ["10.102.26.144","10.102.26.141","10.102.8.193","10.102.8.192","10.102.8.191","10.102.8.190","10.102.8.19","10.102.8.189","10.102.8.188","10.102.8.187","10.102.8.186","10.102.8.185","10.102.30.47","10.102.30.46","10.102.30.45","10.102.30.44","10.102.30.43","10.102.30.42","10.102.30.41","10.102.30.40"]
#"324549","324551","324531","324529","324527","277717","277717","14406","14406","14406","267475","277579","280235","279071","279073","278047","230829","268205","223623",
ids = ["231669","266891","261659","265897","265899","262997","223615","277323","277323","307905","278079","324523","324523","293293","324523","324523","324523","324523","324523","268603","308063","308063","308063","324523","324523","283271","324523","294439","324523","317043","324523","296659","324523","296665","321677","278079","277579","321191","297551","271151","271145","271145","324523","271145","324523","321223","324523","323617","323615","259619","259619","259621","259621","259621","259621","323199","323189","323189","323189","323189","278047","231609","231605","231597","231597","252191","252191","247899","247899","247899","231621","231621","231621","242137","242145","242133","242133","279073","279071","15679","244105","244105","255915","255913","255913","255913","255913","268311","268311","268311","242145","265349","265337","265337","290021","177753","286601","177745","286603","324523","290441","282017","278047","267475","292817","258157","237007","253205","280271","285513","285513","285513","324553","324555","324557","324561","324559","265337","265337","265337","286647","286647","286647","324543","324541","324547","324545","324539","291537","324537","324533","324535","324525","324527","324529","324531","284209","324551","324549","324523","324525","324527","324527","324529","324531","324531","324533","324535","324535","324537","324539","324539","324541","324543","324543","324545","324547","324547","324553","324555","324555","324551","324549","324549","324561","324519","324519","324521","324495","324495","324499","323531","323531","324493","324301","324299","324297","324295","324295","324293","324291","324291","324289","324497","324497","324421","324423","324423","324425","324419","324419","324417","324559","324559","324523","324525","324527","324529","324531","324533","324535","324537","324539","324541","324543","324545","324547","324553","324555","324551","324549","324561","324519","324521","324495","324499","324493","324497","324421","324423","324425","324559","240719","240693","240693","240693","240669","240669","240669","240675","240677","240677","277579","279073","279071","57103","57103","57091","57091","57109","57109","57093","57093","57093","57107","57107","57111","57111","57099","57099","57073","57073","176861","176861","177753","177753","286603","286603","12228","12228","12228","652","311759","316119","264531","215477","278047","275825","58881","266509","316119","51060","4273","12228","5536","20264","20264","14165","14165","277717","277717","277717","14406","14406","14406","267475","277579","280235","279071","279073","278047","230829","268205","223623","231669","266891","261659","265897","265899","262997","223615","277323","277323","307905","278079","324523","324523","293293","324523","324523","324523","324523","324523","268603","308063","308063","308063","324523","324523","283271","324523","294439","324523","317043","324523","296659","324523","296665","321677","278079","277579","321191","297551","271151","271145","271145","324523","271145","324523","321223","324523","323617","323615","259619","259619","259621","259621","259621","259621","323199","323189","323189","323189","323189","278047","231609","231605","231597","231597","252191","252191","247899","247899","247899","231621","231621","231621","242137","242145","242133","242133","279073","279071","15679","244105","244105","255915","255913","255913","255913","255913","268311","268311","268311","242145","265349","265337","265337","290021","177753","286601","177745","286603","324523","290441","282017","278047","267475","292817","258157","237007","253205","280271","285513","285513","285513","324553","324555","324557","324561","324559","265337","265337","265337","286647","286647","286647","324543","324541","324547","324545","324539","291537","324537","324533","324535","324525","324527","324529","324531","284209","324551","324549","324523","324525","324527","324527","324529","324531","324531","324533","324535","324535","324537","324539","324539","324541","324543","324543","324545","324547","324547","324553","324555","324555","324551","324549","324549","324561","324519","324519","324521","324495","324495","324499","323531","323531","324493","324301","324299","324297","324295","324295","324293","324291","324291","324289","324497","324497","324421","324423","324423","324425","324419","324419","324417","324559","324559","324523","324525","324527","324529","324531","324533","324535","324537","324539","324541","324543","324545","324547","324553","324555","324551","324549","324561","324519","324521","324495","324499","324493","324497","324421","324423","324425","324559","321679","270011","310241","272647","272647","272649","272649","220549","220549","297821","220549","10575","10575","10575","278075","278075","278075","297821","291537","324301","324299","324297","324297","324295","324293","267475","267319","324291","324289","284209","284209","284209","284209","284209","282017","279309","279313","279311","324525","324535","324533","324537","324539","324545","324547","324541","324543","324559","324561","324557","324555","324553","324523","23870","23869","23858","23871","177753","284209","324523","324523","324525","324529","324527","324537","324533","324535","324539","324553","324555","324547","324545","324551","324549","324557","324561","324559","324543","324543","324541","324541","324531","271861","280705"]


def runUpdate(i,count):
    login_url = "http://" + ips[i] + ':8081/search/login.jhtml?loginName=doug&loginPwd=cutting'
    session = requests.session()
    session.post(login_url, headers=headers)

    myI = i
    while myI < len(ids):
        try:
            print ips[i]+":" +str(myI)+":"+str(ids[myI])
            resp = session.get('http://'+ ips[i] +':8081/search/upPage.jhtml?id=' + ids[myI])
        except Exception as e:
            print e
        count += 1
        print ips[i]+":" +str(myI)+":"+str(ids[myI])+"  finish"+ ":" + str(count)
        myI = len(ips) + 1 + myI

print len(ids)
for i in xrange(len(ips)):
    t =threading.Thread(target=runUpdate,args=(i,count))
    t.start()